<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:secc="http://www.springframework.org/security/tags">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Insert title here</title>
</h:head>
<ui:composition template="/template1.xhtml">
	<ui:define name="content">


	<h:form id="vcs">
		<p:messages autoUpdate="true" closable="true"></p:messages>
		
		<div class="card card-w-title" dir="rtl">
			<h1 style="color: #7CB342; text-align: center;">
				سندات القبض<span class="fa fa-fw fa-clock-o"></span>
			</h1>
			<br /> 
			<!-- 			<div class="ui-g"> -->
			<!-- 								<div class="ui-g-2"> -->
			<!-- 			<p:commandButton icon="ui-icon ui-icon-search" -->
			<!-- 						action="#{employersBean.goToEmployeeDetails()}"> -->

			<!-- 					</p:commandButton> -->
			<!-- 					</div></div> -->
			<secc:authorize ifAnyGranted="ROLE_ADMIN">
			<div class="ui-g">
			<div class="ui-g-1">
			<p:outputLabel value="اختر القسم"></p:outputLabel>
			</div>
			<div class="ui-g-5" >
			
		<p:selectOneMenu style="margin-bottom:70px;width:50%" value="#{billReceiveBean.departmentId}" >
		<f:selectItem itemLabel="اختر القسم"></f:selectItem>
		<f:selectItem itemLabel="الكل" itemValue="0" ></f:selectItem>
		<f:selectItems value="#{billReceiveBean.depts}" var="dept"
		itemLabel="#{dept.deptName}" itemValue="#{dept.deptId}" noSelectionValue="true"
		></f:selectItems>
		<p:ajax listener="#{billReceiveBean.update}" update="@form" process="@this"></p:ajax>
		</p:selectOneMenu>
		
		</div>
			</div>
		</secc:authorize>	
		
			<p:dataTable id="cnt" var="billReceive"
				value="#{billReceiveBean.billsRecieve}" 
				widgetVar="cellcnt" paginatorPosition="bottom"
				filteredValue="#{billReceiveBean.filtredBills}"
				sortBy="#{billReceive.sanadNo}" sortOrder="descending" rows="13"
				paginator="true"
				paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
				
				

				<p:column style="text-align:center" headerText="اسم صاحب السند">
				
					
						
							<h:outputText value="#{billReceive.customerName}" />
						
					
				</p:column>
				
				<p:column style="text-align:center" headerText="نوع السند">
					
						
							<h:outputText
								value="#{billReceive.billReason}" />
							
						
						
					
				</p:column>
				<p:column style="text-align:center" headerText="تاريخ السند">
					
						
							<h:outputText value="#{billReceive.billDate}" />
						
						
					
				</p:column>
				<p:column style="text-align:center" headerText="المبلغ المدفوع">
					
						
							<h:outputText value="#{billReceive.amountPay}"/>
						
						
					
				</p:column>
				<p:columnGroup type="footer">
            
            <p:row>
                <p:column colspan="3"  footerText="المجموع" />
                <p:column colspan="1" footerText="#{billReceiveBean.total}" />
            </p:row>
            
        </p:columnGroup>
								
				
				
			</p:dataTable>
		</div>
	</h:form>


</ui:define>
</ui:composition>
</html>